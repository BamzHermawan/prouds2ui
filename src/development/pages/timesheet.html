<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="author" content="PT Sigma Cipta Caraka (Telkomsigma)">
	<meta name="description" content="HOME for PROUDS 2 Web Application">
	<link rel="icon" href="http://localhost:5501/media/favicon.png" type="image/x-icon" />
	<title>TIMESHEET | PROUDS 2</title>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
	<link rel="stylesheet" href="https://cdn.materialdesignicons.com/3.9.97/css/materialdesignicons.min.css">
	<link rel="stylesheet" href="../../styles/perfect-scrollbar.css">
	<link rel="stylesheet" href="../../styles/style.scss">
</head>

<body>
	<div class="loader-wrapper animated fadeIn">
		<img src="http://localhost:5501/media/loader.gif">
	</div>

	<div id="main-layout" class="wrapper open-first">
		<section id="side-main" class="sidebar">
			<div class="brand animated slideInLeft fast">
				<span>PROUDS</span>
			</div>
			<div class="side-list animated slideInLeft faster">
				<a href="#notification" class="parent-list">
					<div class="list-title">
						<label>
							<span class="mdi mdi-bell-outline in-left"></span>
							<span>Notification</span>
						</label>
						<div class="action">
							<span class="tag is-warning">{{notifCount}}</span>
						</div>
					</div>
				</a>
			</div>

			<!-- Sidebar disesuaikan dengan halaman yang dibuka -->
			<side-list label="Project" name="project">
				<side-item href="project/list.html">Project</side-item>
				<side-item href="project/projectassignment.html">Project Assignment</side-item>
				<side-item active>Timesheet</side-item>
				<side-item href="rebaseline.html">Rebaseline</side-item>
				<side-item href="#no-edit">Closing</side-item>
			</side-list>

			<side-list label="My Workspace" name="ws"></side-list>
		</section>

		<nav id="nav-main" class="navbar main is-primary" role="navigation" aria-label="main navigation">
			<div class="navbar-menu main-navbar">
				<div class="navbar-start">
					<a id="toggle-sidebar" class="navbar-item">
						<span class="mdi mdi-chevron-left mdi-24px"></span>
					</a>

					<a class="navbar-item is-active">
						PROJECT
					</a>

					<a class="navbar-item">
						Resource
					</a>

					<a class="navbar-item">
						Monitoring
					</a>

					<a class="navbar-item">
						Operations
					</a>

					<a class="navbar-item">
						Reports
					</a>
				</div>

				<div class="navbar-end">
					<a href="http://" class="navbar-item hover-text">
						<span class="mdi mdi-view-dashboard-outline"></span>
						<span data-toggle="text" class="animated fadeIn is-uppercase in-right faster">dashboard</span>
					</a>

					<a href="setting/authorization.html" class="navbar-item hover-text">
						<span class="mdi mdi-settings-outline"></span>
						<span data-toggle="text" class="animated fadeIn is-uppercase in-right faster">setting</span>
					</a>

					<div class="navbar-item has-dropdown is-hoverable">
						<div class="navbar-link is-arrowless">
							<span class="mdi mdi-account-outline"></span>
						</div>
						<div class="navbar-dropdown is-boxed is-right">
							<a href="profile.html" class="navbar-item">Account Profile</a>
							<a href="#help" class="navbar-item">Need Help ?</a>
							<a id="prouds-acting-menu" data-action="http://localhost:5501/demo/post_detect.php" class="navbar-item">Acting As</a>
							<hr class="navbar-divider">
							<a href="#" class="navbar-item">
								<span>Sign Out</span>
								<span class="mdi mdi-logout-variant"></span>
							</a>
						</div>
					</div>
				</div>
			</div>
		</nav>

		<section id="vapp" class="contentPage">
			<section class="hero is-light is-bold">
				<div class="hero-body">
					<div class="container">
						<h1 class="title is-marginless">
							<span>Timesheet</span>
						</h1>
						<div id="bookmarkPage">
							<bookmark-button></bookmark-button>
						</div>
					</div>
				</div>
			</section>
			<section class="section">
				<div id="contentApp" class="container">
					<div v-for="(date,idx) in tmp" :key="idx" v-if="showList">
						<div class="columns is-multiline" style="margin-bottom: 15px;">
							<div class="column is-12">
								<b-message type="is-timesheet" size="is-small">
									<h4 class="is-marginless has-text-weight-bold">{{tmp[idx]}}</h4>
								</b-message>
							</div>
							<template v-for="(ts, index) in myTimesheet">
								<span :key="index"></span>
								<div class="column is-4-widescreen is-6-tablet"
									v-if="tmp[idx] === myTimesheet[index].start">
									<div class="card timesheet" style="min-height: 200px; cursor: pointer !important;"
										@click="setTimesheet(ts)">
										<div class="card-content">
											<p class="has-text-weight-bold">{{ ts.task }}</p>
										</div>
										<div class="card-content content is-marginless">
											<p style="max-width:95%;">
												{{ ts.project_name }}</p>
											<b-field grouped>
												<div class="control">
													<b-taglist attached size="are-medium">
														<b-tag type="is-dark">IWO</b-tag>
														<b-tag type="is-info">{{ ts.iwo }}</b-tag>
													</b-taglist>
												</div>
												<div class="control">
													<div class="tags has-addons">
														<span class="tag is-dark" style="padding:0px 6px;">
															<span class="mdi mdi-account-tie is-marginless"></span>
														</span>
														<span class="tag is-info">{{ ts.member }}</span>
													</div>
												</div>
											</b-field>

											<p class="has-top-margin">
												<span class="icon is-small">
													<span class="mdi mdi-calendar-clock"></span>
												</span>
												<span>{{ ts.start | moment}} -
													{{ ts.end | moment }}</span>
											</p>
										</div>

										<footer class="card-footer">
											<div class="card-footer-item">
												<div class="timesheet-progress">
													<p>Timesheet</p>
													<progress-bar :bars="ts.timesheet" no-margin></progress-bar>
												</div>
											</div>
											<div class="card-footer-item">
												<div class="timesheet-progress">
													<p>Task Progress</p>
													<progress-bar :value="ts.taskProgress" no-margin></progress-bar>
												</div>
											</div>
										</footer>
									</div>
								</div>
							</template>
						</div>
					</div>

					<div v-if="showForm" class="animated fadeIn faster">
						<div class="columns is-marginless">
							<div class="column is-8-desktop content is-marginless is-paddingless">
								<h3 class="is-small has-text-weight-light is-reduced-margin is-uppercase">
									{{ dataForm.project_name }}</h3>
								<b-field grouped>
									<div class="control">
										<b-taglist attached>
											<b-tag type="is-dark">ID</b-tag>
											<b-tag type="is-info">{{ dataForm.project_id }}</b-tag>
										</b-taglist>
									</div>
									<div class="control">
										<b-taglist attached size="are-medium">
											<b-tag type="is-dark">IWO</b-tag>
											<b-tag type="is-info">{{ dataForm.iwo }}</b-tag>
										</b-taglist>
									</div>
								</b-field>
							</div>
							<div class="column is-clearfix is-paddingless">
								<a class="button is-danger is-long is-pulled-right" @click="setTimesheet">
									â—€ Back
								</a>
							</div>
						</div>

						<!-- Add horizontal line -->
						<hr>

						<form action="http://localhost:5501/demo/post_detect.php" method="POST"
							enctype="multipart/form-data">
							<div class="columns">
								<div class="column is-8-desktop add-border-right">
									<b-message type="is-info" size="is-small" title="Task" :closable="false">
										<div class="content">
											<b-input type="hidden" name="task_id" :value="dataForm.task_id"></b-input>
											<p class="has-text-weight-light">{{ dataForm.task }}</p>
										</div>
									</b-message>

									<label class="label">Evidence</label>
									<div class="columns">
										<div class="column">
											<crud-input readonly name="documentName" :color="determineFieldStatus"
												v-model="documentName" input-style="">
												<template slot="helptext">
													<p :class="'help ' + determineFieldStatus">
														File yang dibolehkan: jpg, jpeg, png, doc, docx,
														pdf, xls, xlsx, ppt, pptx ; File size maksimal
														20MB
													</p>
												</template>
											</crud-input>
										</div>
										<div class="column is-one-third">
											<b-field>
												<b-upload v-model="selectedDocument" name="evidDoc" native required
													style="width:100%;">
													<a class="button is-info is-fullwidth">
														<b-icon icon="upload"></b-icon>
														<span>Browse File</span>
													</a>
												</b-upload>
											</b-field>
										</div>
									</div>
									<b-field label="Activity">
										<b-input maxlength="200" type="textarea" name="activity"
											placeholder="Describe your activity related to this task so that your pm could understand what you do."
											required></b-input>
									</b-field>
								</div>
								<div class="column is-4-desktop">
									<crud-input type="datepicker" name="date" :min-date="minDate" :max-date="maxDate"
										label="Timesheet Date" placeholder="Choose Date">
									</crud-input>
									<crud-input type="number" name="hour" :min="0" :max="24" label="Total Work Hour"
										color="is-info" placeholder="0">
									</crud-input>
									<crud-input type="select" name="level" label="Select Area"
										placeholder="Choose area location">
										<option selected style="display: none;"></option>
										<option value="1">Jabodetabek</option>
										<option value="2">Non Lokal Jawa</option>
										<option value="3">Luar Jawa Dalam Negeri</option>
										<option value="4">Luar Negeri</option>
									</crud-input>

									<button class="button is-success is-long" type="submit">
										Submit
									</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</section>
		</section>

		<section id="infoFooter">
			<info-footer api-entry-chart="http://localhost:5501/demo/chart.php?entry"
				api-utilization-chart="http://localhost:5501/demo/chart.php?utilization" entry="100" utilization="100">
			</info-footer>
		</section>
	</div>

	<script>
		// for testing only. boleh dihapus pas di CI nya
		const today = new Date().getDate();
		const month = new Date().getMonth() + 1;
		const randomNumber = () => Math.floor(Math.random() * Math.floor(100));
		// for testing only. boleh dihapus pas di CI nya

		//! yang ngurutin jadinya frontend ðŸ˜­
		const MYTIMESHEET = [
				{
					"iwo": "P-1909SCC-TTES1001",
					"project_id": 10001,
					"task_id": 1,
					"project_name": "ullamco sit et sint ut qui Lorem esse culpa laborum.",
					"task": "Magna ullamco tempor et nostrud ut elit.",
					"start": today + "/" + month + "/2019",
					"end": today + "/" + month + "/2019",
					"member": 1,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: 50, color: 'is-success'},
						{ data: 55, color: 'is-info'}
					]
				},
				{
					"iwo": "P-1909SCC-TTES1002",
					"project_id": 10002,
					"task_id": 2,
					"project_name": "ex proident tempor aute consequat velit ut tempor exercitation non reprehenderit consequat velit Lorem exercitation",
					"task": "Laboris Lorem quis qui velit aliqua est incididunt Lorem.",
					"start": "1/"+ month +"/2019",
					"end": "29/"+ month +"/2019",
					"member": 3,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: 60, color: 'is-success' },
						{ data: 20, color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1003",
					"project_id": 10003,
					"task_id": 3,
					"project_name": "fugiat aute tempor ad tempor fugiat qui eiusmod sunt aute et veniam do exercitation pariatur",
					"task": "Esse labore sunt anim id incididunt nostrud ad ex nostrud incididunt proident ex.",
					"start": "01/10/2019",
					"end": "29/12/2019",
					"member": 2,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				}
			]
		const DELAYED = [
				{
					"iwo": "P-1909SCC-TTES1011",
					"project_id": 10011,
					"task_id": 4,
					"project_name": "veniam enim tempor dolor et ex fugiat excepteur est nostrud voluptate pariatur mollit pariatur reprehenderit",
					"task": "Sint dolor cillum aliquip nostrud elit elit do incididunt amet occaecat dolor ipsum dolore irure.",
					"start": "01/01/2018",
					"end": "12/10/2019",
					"member": 3,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1012",
					"project_id": 10012,
					"task_id": 5,
					"project_name": "pariatur eiusmod anim elit quis laboris.",
					"task": "Exercitation esse proident consequat ut aliquip reprehenderit mollit officia officia aute irure veniam.",
					"start": "02/10/2019",
					"end": "26/10/2019",
					"member": 5,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				}
			]
		const PLANNED = [
				{
					"iwo": "P-1909SCC-TTES1021",
					"project_id": 10021,
					"task_id": 6,
					"project_name": "non excepteur enim id tempor cupidatat nostrud fugiat est laborum ad magna quis occaecat dolor",
					"task": "Eu non qui proident consectetur quis tempor.",
					"start": "06/12/2019",
					"end": "02/03/2020",
					"member": 3,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1022",
					"project_id": 10022,
					"task_id": 7,
					"project_name": "aliquip do et exercitation commodo commodo adipisicing ullamco commodo nulla qui consectetur officia sit tempor",
					"task": "Exercitation irure consequat reprehenderit nulla aliqua id do qui incididunt in mollit adipisicing eiusmod sunt.",
					"start": "13/12/2019",
					"end": "03/01/2020",
					"member": 2,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1023",
					"project_id": 10023,
					"task_id": 8,
					"project_name": "culpa dolor excepteur dolore nulla tempor do quis quis nisi duis dolore commodo cillum consectetur",
					"task": "Anim eu proident elit nisi officia magna sint sunt adipisicing consequat nostrud commodo eiusmod.",
					"start": "01/12/2019",
					"end": "17/05/2020",
					"member": 1,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1024",
					"project_id": 10024,
					"task_id": 9,
					"project_name": "occaecat irure in ut non aliqua dolor ipsum cillum dolor est proident consectetur aute sit",
					"task": "Tempor Lorem laboris eu reprehenderit esse cupidatat est.",
					"start": "03/12/2019",
					"end": "29/02/2020",
					"member": 2,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1025",
					"project_id": 10025,
					"task_id": 1,
					"project_name": "mollit esse dolore anim sunt labore est sit ipsum nulla fugiat anim officia anim ullamco",
					"task": "Lorem exercitation ipsum commodo elit esse excepteur.",
					"start": "03/12/2019",
					"end": "08/02/2020",
					"member": 4,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1026",
					"project_id": 10026,
					"task_id": 2,
					"project_name": "veniam ipsum aliquip incididunt tempor incididunt enim veniam magna in esse qui nulla elit anim",
					"task": "Aliqua consequat reprehenderit cillum excepteur nisi labore est deserunt ea.",
					"start": "10/12/2019",
					"end": "23/02/2020",
					"member": 5,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1027",
					"project_id": 10027,
					"task_id": 3,
					"project_name": "cillum proident enim dolor nostrud nulla proident culpa nostrud eiusmod sint esse esse commodo sunt",
					"task": "Dolor consequat aliquip magna sunt magna esse consequat ullamco.",
					"start": "03/12/2019",
					"end": "20/02/2020",
					"member": 2,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1028",
					"project_id": 10028,
					"task_id": 4,
					"project_name": "mollit minim proident in velit sunt consequat adipisicing aute incididunt in amet ullamco amet non",
					"task": "Exercitation ex magna enim deserunt minim magna nostrud Lorem veniam anim laboris aliquip.",
					"start": "04/12/2019",
					"end": "18/03/2020",
					"member": 1,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1029",
					"project_id": 10029,
					"task_id": 5,
					"project_name": "aute ad veniam non esse ex sit cillum commodo id duis nisi deserunt incididunt elit",
					"task": "Cillum consequat ad aute sunt dolore aute et minim culpa exercitation culpa officia eiusmod id.",
					"start": "10/12/2019",
					"end": "16/01/2020",
					"member": 3,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				},
				{
					"iwo": "P-1909SCC-TTES1030",
					"project_id": 10030,
					"task_id": 6,
					"project_name": "eiusmod officia anim est qui duis ullamco fugiat aliquip nulla anim in sunt Lorem amet",
					"task": "In id anim magna quis veniam sit esse anim tempor adipisicing excepteur laboris duis exercitation.",
					"start": "11/12/2019",
					"end": "31/03/2020",
					"member": 1,
					"taskProgress": randomNumber(),
					"timesheet": [
						{ data: randomNumber(), color: 'is-success' },
						{ data: randomNumber(), color: 'is-info' }
					]
				}
			]
	</script>

	<script src="../scripts/layout/controller.js"></script>
	<script src="../scripts/timesheet/timesheet.js"></script>
</body>

</html>